function getPlugins(){0!=$("#file_upload").length&&$(function(){$("#file_upload").uploadify({uploader:cdnRoot+"/global/js/uploadify/uploadify.swf?titre=ilia",script:cdnRoot+"/global/js/uploadify/uploadify.php",cancelImg:cdnRoot+"/global/media/images/uploadify_cancel.png",scriptAccess:"always",allowScriptAccess:"always",fileKey:fileKey,folder:"/media/uploads/",multi:!0,sitePath:sitePath,fileExt:filesToUpload,fileDesc:"Files to upload",removeCompleted:!1})})}var special_item=new Array("confirm","multiple_choice","checkboxes","captcha","paragraph_text","drop_down","name_text","date","time","address","price","section_break","file_upload","comments","double_text"),reqFields=new Array;!function($){$.contact={getTimeField:function(e,a){var t="";return t+=this.getHeader(e,a),"on"==e.required?class_name="required":class_name="optional",option=",custom[onlyNumberSp]",t+='<input type="hidden" name="item['+a+'][label]" value="'+e.label+'"/>',t+='<input type="hidden" name="item['+a+'][id]" value="'+a+'"/>',t+='<span class="two-column">',t+='<input class="validate['+class_name+option+'] text-input hour" id="'+a+'_heure" type="text" name="item['+a+'][value][hour]" maxlength="2" /><span>:</span>',t+="<br/><small>HH</small>",t+="</span>",t+='<span class="two-column">',t+='<input class="validate['+class_name+option+'] text-input minutes" id="'+a+'_minute" type="text"name="item['+a+'][value][minutes]" maxlength="2" />',t+="<br/><small>MM</small>",t+="</span>",t+="<div style='clear:both'></div>",t+="<small>"+e.guidelines+"</small>",t+="</div>",""!=e.required&&"on"==e.required&&(reqFields[a+"Vheure"]=!0,reqFields[a+"Vminute"]=!0),t},setRadionActions:function(e){var a=$(e).children(":input");$(a).click(function(){$(a).removeAttr("checked"),$(this).attr("checked","''")})},getFieldType:function(e){for(type in special_item)if(-1!=e.indexOf(special_item[type]))return-1!==e.indexOf("address")?"address":-1!==e.indexOf("paragraph_text")||-1!==e.indexOf("comments")?"paragraph":-1!==e.indexOf("drop_down")?"select":-1!==e.indexOf("name_text")?"name":-1!==e.indexOf("date")?"date":-1!==e.indexOf("time")?"time":-1!==e.indexOf("price")?"price":-1!==e.indexOf("file_upload")?"upload":-1!==e.indexOf("confirm")?"confirm":-1!==e.indexOf("checkboxes")?"checkboxe":-1!==e.indexOf("multiple_choice")?"multiple":-1!==e.indexOf("section_break")?"break":-1!==e.indexOf("double_text")?"double_text":void 0;return"simple"},getHeader:function(e,a){var t="";if("undefined"!=typeof e.guidelines&&(t=e.guidelines),e.size=e.size?e.size:"small","undefined"!=typeof e.size)switch(e.size){case"25":sizeClass="Small";break;case"40":sizeClass="Medium";break;case"55":sizeClass="Large";break;default:sizeClass="Medium"}else sizeClass="Medium";var i="";return className=e&&e.className?e.className:"",i+="<div class='"+className+" formItem id_"+a+" "+sizeClass+"' style='overflow:visible'>",i+="<label class='infoLabel' for='"+a+"'>",i+=e.label,"on"===e.required&&(i+="<span class='required'> *</span>"),i+="</label>"},getSimpleField:function(e,a){var t="";return t+=this.getHeader(e,a),t+="<span class='simpleInputFrame'></span>","on"==e.required?class_name="required":class_name="optional",option="",-1!=a.indexOf("number")?option=",custom[onlyNumberSp]":(-1!=a.indexOf("mail")||-1!=a.indexOf("email"))&&(option=",custom[email]"),t+='<input  type="hidden" value=\''+e.id+"' name='item["+a+"][id]' />",t+=-1!=e.label.indexOf("'")?'<input  type="hidden" value="'+e.label+"\" name='item["+a+"][label]' />":'<input  type="hidden" value=\''+e.label+"' name='item["+a+"][label]' />",addValue=-1!=e.id.indexOf("web_site")?"http://":"",t+="<input id='"+a+"' type=\"text\" value='"+addValue+"' name='item["+a+"][value]' class='"+sizeClass+" validate["+class_name+option+"] text-input'/>",t+="<small>"+e.guidelines+"</small>",t+="</div>",""!=e.required&&"on"==e.required&&(reqFields[a]=!0),t},getParagraphField:function(e,a){"on"==e.required?class_name="required":class_name="optional";var t=!1;"on"==dataContact[a].single&&dataContact[a].singleContent&&(t=!0);var i="";if(i+=this.getHeader(e,a),i+="<span class='simpleInputFrame'></span>",1==t){var l=dataContact[a].singleContent;i+="<input type='hidden' name='item["+a+"][id]' value='"+a+"'>",i+="<input type='hidden' name='item["+a+"][label]' value='"+dataContact[a].label+"'>",i+="<div class='singleText' name='item["+a+"][valueShowed]' id="+a+">"+l+"</div>",i+="<input type='hidden' name='item["+a+"][value]' value='"+dataContact[a].singleContent+"'>",i+="<input type='hidden' name='item["+a+"][isPhrase]' value='1'>"}else"on"==e.required?(class_name="required",reqFields[a]=!0):class_name="optional",i+='<input  type="hidden" value=\''+e.id+"' name='item["+a+"][id]' />",i+=-1!=e.label.indexOf("'")?'<input  type="hidden" value="'+e.label+"\" name='item["+a+"][label]' />":'<input  type="hidden" value=\''+e.label+"' name='item["+a+"][label]' />",i+='<textarea id="'+a+'" class="'+sizeClass+" validate["+class_name+'] text-input" type="text" rows="5" cols="30" name="item['+a+'][value]"></textarea>';return i+="<small>"+e.guidelines+"</small>",i+="</div>"},getAddressField:function(e,a){var t="";return"on"==e.required?class_name="required":class_name="optional",t+=this.getHeader(e,a),t+='<input  type="hidden" value=\''+a+"' name='item["+a+"][id]' />",t+=-1!=e.label.indexOf("'")?'<input  type="hidden" value="'+e.label+"\" name='item["+a+"][label]' />":'<input  type="hidden" value=\''+e.label+"' name='item["+a+"][label]' />",t+='<span class="two-column">',t+="<input id='"+a+"_rue' class='validate["+class_name+"] text-input addressInput address' type='text' name='item["+a+"][value][rue]'/>",t+='<small class="space">'+contact_adresse_street+"</small>",t+="</span>",t+='<span class="two-column">',t+="<input id='"+a+"_ville' class='validate["+class_name+"] text-input addressInput city' type='text' name='item["+a+"][value][ville]' />",t+='<small class="space">'+contact_adresse_city+"</small>",t+="</span>",t+='<div class="clear"></div>',t+='<span class="two-column">',t+="<input id='"+a+"_zip' class='validate["+class_name+"] text-input addressInput zip' type='text' name='item["+a+"][value][zip]'/>",t+='<small class="space">'+contact_adresse_zip+"</small>",t+="</span>",t+='<span class="two-column">',t+="<input id='"+a+"_pays' class='validate["+class_name+"] text-input addressInput country' type='text' name='item["+a+"][value][pays]'/>",t+='<small class="space">'+contact_adresse_country+"</small>",t+="</span>",t+='<div class="clear"></div>',t+="<small>"+e.guidelines+"</small>",t+="</div>",""!=e.required&&"on"==e.required&&(reqFields[a+"Vrue"]=!0,reqFields[a+"Vville"]=!0,reqFields[a+"Vzip"]=!0,reqFields[a+"Vpays"]=!0),t},getSelectField:function(e,a){var t="";t+=this.getHeader(e,a),"on"==e.required?class_name="required":class_name="optional",t+="<input  type='hidden' value='"+a+"' name='item["+a+"][id]' />",t+=-1!=e.label.indexOf("'")?'<input  type="hidden" value="'+e.label+"\" name='item["+a+"][label]' />":'<input  type="hidden" value=\''+e.label+"' name='item["+a+"][label]' />",t+="<select name='item["+a+"][value]' class='contactSelect'>";for(key in e.drop_down){var i=e.drop_down[key].selected===!0||"true"==e.drop_down[key].selected?"selected=''":"";t+="<option  "+i+' class="'+a+'">'+e.drop_down[key].label+"</option>"}return t+="</select>",t+="<small>"+e.guidelines+"</small>",t+="</div>"},getNameField:function(e,a){var t="";return t+=this.getHeader(e,a),"on"==e.required?class_name="required":class_name="optional",t+='<input  type="hidden" value=\''+a+"' name='item["+a+"][id]' />",t+=-1!=e.label.indexOf("'")?'<input  type="hidden" value="'+e.label+"\" name='item["+a+"][label]' />":'<input  type="hidden" value=\''+e.label+"' name='item["+a+"][label]' />",t+='<span class="two-column">',t+='<input id="'+a+'_first" class="validate['+class_name+'] text-input" type="text" name="item['+a+'][value][first]" />',t+="<br/><small>"+contact_name_first+"</small>",t+="</span>",t+='<span class="two-column">',t+='<input id="'+a+'_last" class="validate['+class_name+'] text-input" type="text" name="item['+a+'][value][last]"/>',t+="<br/><small>"+contact_name_last+"</small>",t+="</span>",t+='<div style="clear:both"></div>',t+="<small>"+e.guidelines+"</small>",t+="</div>",""!=e.required&&"on"==e.required&&(reqFields[a+"Vfirst"]=!0,reqFields[a+"Vlast"]=!0),t},getDateField:function(e,a){var t="";return t+=this.getHeader(e,a),"on"==e.required?class_name="required":class_name="optional",option="",t+='<input  type="hidden" value=\''+a+"' name='item["+a+"][id]' />",t+=-1!=e.label.indexOf("'")?'<input  type="hidden" value="'+e.label+"\" name='item["+a+"][label]' />":'<input  type="hidden" value=\''+e.label+"' name='item["+a+"][label]' />",t+="<input class='validate["+class_name+option+"] datepicker' type='text' name='item["+a+"][value]' id='' value='' />",t+="<small>"+e.guidelines+"</small>",t+="</div>",""!=e.required&&"on"==e.required&&(reqFields[a+"Vjour"]=!0,reqFields[a+"Vmois"]=!0,reqFields[a+"Van"]=!0),t},getPriceField:function(e,a){var t="";return t+=this.getHeader(e,a),"on"==e.required?class_name="required":class_name="optional",option=",custom[onlyNumberSp]",t+='<input  type="hidden" value=\''+a+"' name='item["+a+"][id]' />",t+=-1!=e.label.indexOf("'")?'<input  type="hidden" value="'+e.label+"\" name='item["+a+"][label]' />":'<input  type="hidden" value=\''+e.label+"' name='item["+a+"][label]' />",t+='<span class="two-column">',t+='<input class="validate['+class_name+option+'] text-input euro" id="'+a+'_euro" type="text" size="3" name="item['+a+'][value][euro]" /><span>,</span>',t+="<br><small>"+contact_euro+"</small>",t+="</span>",t+='<span class="two-column">',t+='<input class="validate['+class_name+option+'] text-input cents" id="'+a+'_cents" type="text" size="3" name="item['+a+'][value][cent]"  maxlength="2" />',t+="<br><small>"+contact_cents+"</small>",t+="</span>",t+='<div style="clear:both"></div>',t+="<small>"+e.guidelines+"</small>",t+="</div>",""!=e.required&&"on"==e.required&&(reqFields[a+"Veuro"]=!0,reqFields[a+"Vcents"]=!0),t},getUploadField:function(e,a){var t=$("#ajaxUpload").html();if("undefined"==typeof t||null==t||0==t.length)return"";var i="undefined"!=typeof e&&"undefined"!=typeof e.guidelines?e.guidelines:"";t=t.replace("xxxDirectivexxx",i);var l="jpg";return""!=e.formats&&(l=e.formats),t=t.replace("xxxFormatsxxx",l),$("#formats").val(l),t},getConfirmField:function(e,a){return html=$("#clientConfirmTpl").html(),html=e&&e.label?html.replace("xxxLabelxxx",'<label for="comments" class="infoLabel">'+e.label+"</label>"):html.replace("xxxLabelxxx",""),html},getDoubleTextField:function(e,a){var t="";return t+=this.getHeader(e,a),"on"==e.required?class_name="required":class_name="optional",t+='<input  type="hidden" value=\''+a+"' name='item["+a+"][id]' />",t+=-1!=e.label.indexOf("'")?'<input  type="hidden" value="'+e.label+"\" name='item["+a+"][label]' />":'<input  type="hidden" value=\''+e.label+"' name='item["+a+"][label]' />",t+='<span class="two-column">',t+=-1!=e.label.indexOf("'")?'<input id="'+a+"_left\" onBlur=\"javascript:if (this.value!='') {$('#'+$(this).attr('id').replace('_left','_right')).attr('class','validate[required] text-input');} else {$('#'+$(this).attr('id').replace('_left','_right')).attr('class','validate[optional] text-input');}\" class=\"validate["+class_name+'] text-input" type="text" name="item['+a+"][value]["+e.label.replace(/ /g,"_")+'left]" />':'<input id="'+a+"_left\" onBlur=\"javascript:if (this.value!='') {$('#'+$(this).attr('id').replace('_left','_right')).attr('class','validate[required] text-input');} else {$('#'+$(this).attr('id').replace('_left','_right')).attr('class','validate[optional] text-input');}\" class=\"validate["+class_name+'] text-input" type="text" name="item['+a+"][value]["+e.label.replace(/ /g,"_")+'left]" />',t+="</span>",t+='<span class="two-column">',t+=-1!=e.label.indexOf('"')?'<input id="'+a+'_right" class="validate['+class_name+'] text-input" type="text" name="item['+a+"][value]["+e.label.replace(/ /g,"_")+'right]"/>':'<input id="'+a+'_right" class="validate['+class_name+'] text-input" type="text" name="item['+a+"][value]["+e.label.replace(/ /g,"_")+'right]"/>',t+="</span>",t+='<div style="clear:both"></div>',t+="<small>"+e.guidelines+"</small>",t+="</div>",""!=e.required&&"on"==e.required&&(reqFields[a+"Vfirst"]=!0,reqFields[a+"Vlast"]=!0),t},getCheckboxesField:function(e,a){var t="";t+=this.getHeader(e,a),"on"==e.required?class_name="required":class_name="optional",t+='<input type="hidden" name="item['+a+'][label]" value="'+e.label+'"/>',t+='<input type="hidden" name="item['+a+'][id]" value="'+a+'"/>';for(key in e.checkboxes){var i=e.checkboxes[key].checked&&"false"!=e.checkboxes[key].checked?"checked=''":"";t+='<span class="option"><input value ="'+e.checkboxes[key].label+'" name="item['+a+"][value]["+key+']" '+i+' type="checkbox" class="checkbox" />'+e.checkboxes[key].label+"</span>"}return t+="<small>"+e.guidelines+"</small>",t+="</div>"},SelectRadio:function(e){className=$(e).attr("class"),$("."+className).attr("checked",!1),$(e).attr("checked",!0)},getMultipleField:function(e,a){var t="";t+=this.getHeader(e,a),"on"==e.required?class_name="required":class_name="optional",t+='<input type="hidden" name="item['+a+'][label]" value="'+e.label+'"/>',t+='<input type="hidden" name="item['+a+'][id]" value="'+a+'"/>';var i=!1;if("on"==e.required)var i=!0,l="group_"+e.id;for(key in e.multiple){var n=e.multiple[key].selected&&"false"!=e.multiple[key].selected?"checked=''":"",s=e.multiple[key].checked&&"false"!=e.multiple[key].checked?"checked=''":"";t+="<span class='option'>",t+="<input class='radio radio_"+a,1==i&&(t+=",validate[required]"),t+="'",t+="onClick='$.contact.SelectRadio(this);' name='item["+a+"][value]' "+n+" "+s+" type='radio' value='"+e.multiple[key].label+"' class='radio'",1==i&&(t+="group='"+l+"'"),t+="/>"+e.multiple[key].label+"</span>"}return t+="<small>"+e.guidelines+"</small>",t+="</div>"},getHtml:function(){"undefined"==typeof params_titre&&(params_titre="");var html='<fieldset><legend class="FormTitle">'+params_titre+"</legend>",existeBreak=!1;for(key in dataContact)if(!this.firstFocus&&dataContact[key].id&&(this.firstFocus=dataContact[key].id),"news_subscription_0"===key)html+='<div class="Medium" id="containerNs" style="overflow:visible">',html+='<div id="newsletterSubscriptionText"><span>jj</span></div>',html+='     <input type="checkbox" id="checkboxSubs" name="checkboxSubs" checked /></div>';else switch(this.getFieldType(key)){case"simple":html+=this.getSimpleField(dataContact[key],key);break;case"paragraph":html+=this.getParagraphField(dataContact[key],key);break;case"select":html+=this.getSelectField(dataContact[key],key);break;case"name":html+=this.getNameField(dataContact[key],key);break;case"address":html+=this.getAddressField(dataContact[key],key);break;case"date":html+=this.getDateField(dataContact[key],key);break;case"time":html+=this.getTimeField(dataContact[key],key);break;case"price":html+=this.getPriceField(dataContact[key],key);break;case"upload":html+=this.getUploadField(dataContact[key],key);break;case"confirm":html+=this.getConfirmField(dataContact[key],key);break;case"double_text":html+=this.getDoubleTextField(dataContact[key],key);break;case"checkboxe":html+=this.getCheckboxesField(dataContact[key],key);break;case"multiple":var code='var parrent=$(".id_'+key+'");';html+=this.getMultipleField(dataContact[key],key),eval(code),this.setRadionActions(parrent);break;case"break":className=dataContact[key].className&&""!=dataContact[key].className?"class='"+dataContact[key].className+"'":"",""==dataContact[key].guidelines?html+="</fieldset><fieldset "+className+">":(html+="</fieldset><fieldset "+className+"><legend>"+dataContact[key].guidelines+"</legend>",html+='<input type="hidden" name="item[single_line_legend][id]" value="single_line_legend_'+dataContact[key].guidelines+'">',html+='<input type="hidden" name="item[single_line_legend'+dataContact[key].guidelines+'][label]" value="'+dataContact[key].guidelines+'">')}1==existeBreak&&(html+="</fieldset>"),$("#infoFrame").append(html),getPlugins();var formatString=$("#formats").val();(""==formatString||void 0==formatString)&&(formatString="jpg");var formatArray=formatString.split(",");if($("#file-uploader"))var uploader=new qq.FileUploader({element:document.getElementById("file-uploader"),action:"/upload.php",params:{sitePath:$("#sitepath").val(),contactFront:1,fileKey:$("#fileKey").val()},debug:!1,sizeLimit:2e7,multiple:!0,allowedExtensions:formatArray})},checkReqField:function(){var e="";for(key in reqFields){var a=$("[name="+key+"]").val();a||(e||(e+=contact_empty_fields+"\n"),e+=key+"\n")}return e},presend:function(e){var a=$(".g-recaptcha").attr("data-size");"undefined"!=typeof a&&a!==!1&&null!==a&&grecaptcha.execute()},send:function(e){if(e){var a=$("input[name=lang]").val();if("fr"==a||"en"==a||"nl"==a||"de"==a||"it"==a||"es"==a||"nh"==a)var t=!1;else var t=!0;if(t===!1){var l=($("#contactForm-"+e).validationEngine({success:!0,ajaxSubmit:!0,failure:!1,returnIsValid:!0}),$("#contactForm-"+e).validationEngine("validate")),n=$("#g-recaptcha-response").val(),s=0;if(""==n?($("#messageCheckRecaptch").css("display","block"),s=0):($("#messageCheckRecaptch").css("display","none"),s=1),1==l&&0==s){$("input[type='submit']").removeAttr("disabled");var d=$(".g-recaptcha").attr("data-size");return void("undefined"!=typeof d&&d!==!1&&null!==d&&grecaptcha.execute())}if(1!=l)return;$("input[type='submit']").removeAttr("disabled");var d=$(".g-recaptcha").attr("data-size");"undefined"!=typeof d&&d!==!1&&null!==d&&'invisible'!==d&&grecaptcha.execute()}var r=$("#contactForm-"+e).serialize();if(-1!==urlToSend.indexOf(",")){var c=document.URL,o=c.split("index.html");urlToSend=o[0]+"/contact/c/Front/submit-forme"}$.ajax({url:urlToSend,type:"POST",data:r,error:function(){$("#contactForm-"+e).css("display","none"),$("#sendConfirm-"+e).html(contact_send_error_server+"<br/>"+contact_send_try_later),$("#sendConfirm-"+e).show()},success:function(a){if($("#contactForm-"+e).css("display","none"),a&&"Sended"==a){if(contact_redirect){if(-1==contact_redirect.indexOf("http://")){if(0!=contact_redirect){var t=document.URL,l=t.split("index.html"),n="";for(i=0;i<l.lenght-1;i++)n+=l[i]+"/";window.location.href=n+contact_redirect}}else window.location.href=contact_redirect;return}$("#sendConfirm-"+e).html(contact_send_success)}else $("#sendConfirm-"+e).html(contact_send_error+"<br/>"+contact_send_try_later);$("#sendConfirm-"+e).show()}})}}}}(jQuery),$(document).ready(function(){if("undefined"!=typeof dataContact){$("#confirmTpl").dialog({bgiframe:!0,closeOnEscape:!0,autoOpen:!1,modal:!0,width:400}),$.contact.firstFocus=!1,$.contact.getHtml(),"Inscription"===transInsc?$.ajax({url:urlTranslation,async:!1,type:"POST",success:function(e){$("#newsletterSubscriptionText").html(e),$("#containerNS").css("display","block")}}):($("#newsletterSubscriptionText").html(transInsc),$("#containerNS").css("display","block"));var e=$("input[name=lang]").val();$(".datepicker").datepicker($.datepicker.regional[e]),$(".datepicker").datepicker({dateFormat:"dd/mm/yy"}),$("input[type='text']").addClass("ui-input-text"),$("textarea").addClass("ui-input-text")}});